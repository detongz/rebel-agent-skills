# Agent Reward Hub - 用户流程设计

## 角色定义

| 角色 | 描述 | 核心目标 |
|------|------|----------|
| **普通用户** | 浏览和使用 Skills 的用户 | 发现好的 Skills，打赏支持的创作者 |
| **创作者** | 开发 Agent Skills 的开发者 | 发布 Skills，获得打赏收益 |
| **项目方** | 需要 Skills 生态的项目 | 赞助特定类别的 Skills，获得曝光 |
| **平台运营** | 管理平台的管理员 | 审核 Skills，管理赞助活动 |

---

## 核心用户流程

### 流程 1：用户首次访问并打赏

```
┌─────────────────────────────────────────────────────────────────────────────┐
│                        用户首次访问流程                                      │
└─────────────────────────────────────────────────────────────────────────────┘

[用户]                    [系统操作                    [用户看到]
   │                          │                             │
   ├── 1. 打开网站 ──────────►│                             │
   │                          │                             │
   │                          ├── 显示首页 ────────────────►│ Hero Banner
   │                          │                             │ "连接钱包开始"
   │                          │                             │
   ├── 2. 点击"连接钱包" ────►│                             │
   │                          │                             │
   │                          ├── 弹出钱包选择 ────────────►│ MetaMask /
   │                          │                             │ WalletConnect
   │                          │                             │
   │◄─ 3. 在钱包中确认 ───────┤                             │
   │                          │                             │
   │                          ├── 检查网络 ────────────────►│ "请切换到
   │                          │                             │  Monad 测试网"
   │                          │                             │
   │◄─ 4. 切换网络 ───────────┤                             │
   │                          │                             │
   │                          ├── 查询余额 ────────────────►│ 余额: 0 $MSKL
   │                          │                             │
   │                          ├── 显示提示 ────────────────►│ "领取测试币"
   │                          │                             │
   ├── 5. 点击"领取测试币" ──►│                             │
   │                          │                             │
   │                          ├── 调用水龙头 API ──────────►│ 处理中...
   │                          │                             │
   │                          ├── 铸造 1000 ASKL ──────────►│ ✅ 到账 1000 ASKL
   │                          │                             │
   ├── 6. 点击"浏览Skills" ──►│                             │
   │                          │                             │
   │                          ├── 显示 Skills 列表 ─────────►│ [Skill卡片1]
   │                          │                             │ [Skill卡片2]
   │                          │                             │ [Skill卡片3]
   │                          │                             │
   ├── 7. 选择一个 Skill ────►│                             │
   │   "Claude Code Copilot"  │                             │
   │                          │                             │
   │                          ├── 显示 Skill 详情 ──────────►│ 名称: Copilot
   │                          │                             │ 创作者: 0xabcd...
   │                          │                             │ 收到: 1,200 ASKL
   │                          │                             │
   ├── 8. 点击"打赏"按钮 ────►│                             │
   │                          │                             │
   │                          ├── 弹出打赏弹窗 ────────────►│ [10] [50] [100]
   │                          │                             │ 输入金额
   │                          │                             │ 留言 (可选)
   │                          │                             │
   │◄─ 9. 选择金额 ───────────┤                             │
   │   选择 50 ASKL           │                             │
   │                          │                             │
   │◄─ 10. 填写留言 ──────────┤                             │
   │   "很棒的 Skill！"       │                             │
   │                          │                             │
   ├── 11. 点击"确认打赏" ───►│                             │
   │                          │                             │
   │                          ├── 显示钱包签名 ────────────►│ 请确认交易
   │                          │                             │
   │◄─ 12. 在钱包中确认 ──────┤                             │
   │                          │                             │
   │                          ├── 执行链上交易 ────────────►│ 处理中...
   │                          │                             │
   │                          │   ├─ 转账 49 ASKL 给创作者  │
   │                          │   ├─ 转账 1 ASKL 给金库    │
   │                          │   └─ 存储打赏记录          │
   │                          │                             │
   │                          ├── 显示成功动画 ────────────►│ ✅ 打赏成功！
   │                          │                             │ 创作者收到 49 ASKL
   │                          │                             │ 查看交易
   │                          │                             │
   └── END                     │                             │
```

---

### 流程 2：创作者注册新 Skill

```
┌─────────────────────────────────────────────────────────────────────────────┐
│                        创作者注册 Skill 流程                                 │
└─────────────────────────────────────────────────────────────────────────────┘

[创作者]                  [系统操作                    [创作者看到]
   │                          │                             │
   ├── 1. 登录平台 ──────────►│                             │
   │                          │                             │
   │                          ├── 检查是否连接钱包 ────────►│ 钱包已连接
   │                          │                             │ 0x1234...5678
   │                          │                             │
   ├── 2. 点击"创建 Skill" ──►│                             │
   │                          │                             │
   │                          ├── 显示创建表单 ────────────►│ ┌────────────┐
   │                          │                             │ │ Skill 名称 │
   │                          │                             │ │ 描述       │
   │                          │                             │ │ 所属平台   │
   │                          │                             │ │ 收款地址   │
   │                          │                             │ └────────────┘
   │                          │                             │
   │◄─ 3. 填写表单 ───────────┤                             │
   │   名称: "AI写作助手"     │                             │
   │   描述: "..."            │                             │
   │   平台: Coze             │                             │
   │   收款: (当前钱包)       │                             │
   │                          │                             │
   │◄─ 4. 点击"创建 Skill" ───┤                             │
   │                          │                             │
   │                          ├── 验证表单 ────────────────►│ 验证中...
   │                          │   ├─ 检查名称格式          │
   │                          │   ├─ 检查描述长度          │
   │                          │   └─ 检查平台有效性        │
   │                          │                             │
   │                          ├── 生成 skillId ────────────►│ 生成中...
   │                          │   keccak256(name + ver)     │
   │                          │                             │
   │                          ├── 调用智能合约 ────────────►│ 请确认交易
   │                          │   registerSkill()           │ 注册到链上
   │                          │                             │
   │◄─ 5. 在钱包中确认 ───────┤                             │
   │                          │                             │
   │                          ├── 等待交易确认 ────────────►│ 注册中...
   │                          │                             │
   │                          ├── 保存元数据到数据库 ──────►│ 保存中...
   │                          │   ├─ 名称                  │
   │                          │   ├─ 描述                  │
   │                          │   ├─ 平台                  │
   │                          │   ├─ 创作者地址            │
   │                          │   └─ GitHub/npm 链接       │
   │                          │                             │
   │                          ├── 铸造奖励 ────────────────►│ ✅ 注册成功！
   │                          │   500 ASKL 奖励             │
   │                          │                             │
   │                          ├── 显示 Skill 页面 ──────────►│ ┌────────────┐
   │                          │                             │ │ AI写作助手 │
   │                          │                             │ │ [编辑]     │
   │                          │                             │ │ [分享]     │
   │                          │                             │ └────────────┘
   │                          │                             │
   │                          ├── 显示分享提示 ────────────►│ 分享你的 Skill
   │                          │                             │ 获得更多打赏！
   │                          │                             │
   └── END                     │                             │
```

---

### 流程 3：项目方发起赞助活动

```
┌─────────────────────────────────────────────────────────────────────────────┐
│                        项目方赞助流程                                        │
└─────────────────────────────────────────────────────────────────────────────┘

[项目方]                  [系统操作                    [项目方看到]
   │                          │                             │
   ├── 1. 登录并进入"赞助中心" │                             │
   │                          │                             │
   ��                          ├── 显示赞助中心 ────────────►│ ┌────────────┐
   │                          │                             │ │ 创建赞助   │
   │                          │                             │ │ 我的活动   │
   │                          │                             │ └────────────┘
   │                          │                             │
   ├── 2. 点击"创建赞助活动" ─►│                             │
   │                          │                             │
   │                          ├── 显示赞助表单 ────────────►│ ┌────────────┐
   │                          │                             │ │ 活动名称   │
   │                          │                             │ │ 赞助金额   │
   │                          │                             │ │ 目标标签   │
   │                          │                             │ │ 活动描述   │
   │                          │                             │ └────────────┘
   │                          │                             │
   │◄─ 3. 填写表单 ───────────┤                             │
   │   名称: "AI工具节"       │                             │
   │   金额: 10000 ASKL       │                             │
   │   标签: [ai, coding]     │                             │
   │                          │                             │
   │                          ├── 计算费用 ────────────────►│ 预计覆盖
   │                          │   当前相关 Skills: 150      │ 150 个 Skills
   │                          │   每个平均可得: ~66 ASKL    │
   │                          │                             │
   │◄─ 4. 点击"确认赞助" ─────┤                             │
   │                          │                             │
   │                          ├── 显示钱包确认 ────────────►│ 请确认转账
   │                          │   10000 ASKL                │ 到赞助合约
   │                          │                             │
   │◄─ 5. 在钱包中确认 ───────┤                             │
   │                          │                             │
   │                          ├── 执行赞助交易 ────────────►│ 赞助中...
   │                          │                             │
   │                          ├── 自动分发给相关 Skills ────►│ ✅ 赞助成功！
   │                          │   ├─ 查询匹配的 Skills      │ 150 个 Skills
   │                          │   ├─ 计算分配比例          │ 收到赞助
   │                          │   └─ 批量转账              │
   │                          │                             │
   │                          ├── 显示活动详情 ────────────►│ ┌────────────┐
   │                          │                             │ │ AI工具节   │
   │                          │                             │ │ 已赞助     │
   │                          │                             │ │ 10,000 ASKL│
   │                          │                             │ │ 覆盖 150   │
   │                          │                             │ │ 个 Skills │
   │                          │                             │ └────────────┘
   │                          │                             │
   │                          ├── 显示曝光数据 ────────────►│ 预计曝光
   │                          │                             │ 50,000+ 用户
   │                          │                             │
   └── END                     │                             │
```

---

## 边界流程

### 边界 1：余额不足

```
[用户] 点击打赏 → 选择金额 → 确认
                     │
                     ▼
                 系统检查余额
                     │
        ┌────────────┴────────────┐
        │                         │
    余额充足                   余额不足
        │                         │
        ▼                         ▼
    继续交易              显示错误提示
                             │
                             ▼
                    "余额不足，请领取测试币"
                             │
                             ▼
                    [领取测试币] 按钮
```

### 边界 2：网络错误

```
[用户] 确认打赏 → 钱包签名 → 提交交易
                              │
                              ▼
                          等待确认
                              │
                 ┌────────────┴────────────┐
                 │                         │
             交易成功                   交易失败/超时
                 │                         │
                 ▼                         ▼
            显示成功              显示错误 + 重试选项
             收到打赏                    │
                                         ▼
                                  [重试] [取消]
```

### 边界 3：水龙头限流

```
[用户] 点击"领取测试币"
            │
            ▼
        检查领取记录
            │
   ┌────────┴────────┐
   │                 │
24小时内未领取   已领取过
   │                 │
   ▼                 ▼
 允许领取        显示错误
   │          "24小时内已领取过"
   ▼                 ▼
 发送测试币    显示下次可领取时间
```

---

## 页面跳转图

```
                    ┌─────────────┐
                    │    首页     │
                    └─────────────┘
                           │
         ┌─────────────────┼─────────────────┐
         │                 │                 │
         ▼                 ▼                 ▼
  ┌─────────────┐  ┌─────────────┐  ┌─────────────┐
  │ Skills 目录  │  │ 创建 Skill  │  │  个人中心   │
  └─────────────┘  └─────────────┘  └─────────────┘
         │
         │ 点击 Skill
         ▼
  ┌─────────────┐
  │ Skill 详情  │◄───── 分享链接
  └─────────────┘
         │
         │ 点击打赏
         ▼
  ┌─────────────┐
  │  打赏弹窗   │
  └─────────────┘
         │
         │ 确认打赏
         ▼
  ┌─────────────┐
  │  交易确认   │
  └─────────────┘
         │
         │ 完成
         ▼
  ┌─────────────┐
  │  成功动画   │
  └─────────────┘
         │
         └──────────► 回到 Skill 详情
```

---

## 关键交互状态

### 打赏按钮状态

| 状态 | 显示 | 触发条件 |
|------|------|----------|
| 默认 | [打赏 💎] | 页面加载完成 |
| 加载中 | [处理中...] | 点击后等待签名 |
| 等待确认 | [确认中...] | 已签名，等待链上确认 |
| 成功 | [✅ 已打赏] | 交易成功 |
| 失败 | [❌ 重试] | 交易失败 |

### 钱包连接状态

| 状态 | 显示 | 动作 |
|------|------|------|
| 未连接 | [连接钱包] | 打开钱包选择器 |
| 连接中 | [连接中...] | 显示加载动画 |
| 已连接（错误网络） | [切换网络] | 提示切换到 Monad |
| 已连接（正确网络） | 0x1234...5678 | 显示地址和余额 |

---

## MVP 核心流程优先级

| 流程 | 优先级 | 说明 |
|------|-------|------|
| 连接钱包 | P0 | 基础功能 |
| 领取测试币 | P0 | 新用户必须有币才能打赏 |
| 浏览 Skills | P0 | 展示已有内容 |
| 打赏 Skill | P0 | 核心功能 |
| 创建 Skill | P0 | 创作者入口 |
| 查看打赏记录 | P1 | 增强体验 |
| 项目方赞助 | P2 | 后期功能 |
